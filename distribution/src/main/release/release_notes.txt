Apache CXF 2.4.3 Release Notes

1. Overview

The 2.4.x versions of Apache CXF are significant new versions of CXF 
that provides several new features and enhancements.  

New features include: 
* Log Browser Console - see the logbrowser sample for an example
* Transformation feature provides for a fast and effective way to transform inbound 
  and/or outbound XML messages, please see the TransformationFeature page for more 
  information.
* JIBX databinding
* Faster startup and reduced spring configuration. The Spring support has been redone
  to be based on the ExtensionManagerBus. This results in much faster startup. It also
  means that all of the imports of META-INF/cxf/cxf-extension-*.xml are no longer 
  needed and are deprecated.  Additionaly, all features are now available when 
  using the ExtensionManager Bus instead of being forced to use Spring.
* WSS4J has been updated from 1.5.x to 1.6. See http://ws.apache.org/wss4j/wss4j16.html
  for the list of new features and upgrade notes for Apache WSS4J 1.6.  Some notable new 
  features for CXF users include:
    * SAML2 support: WSS4J 1.6 includes full support for creating, manipulating and 
    parsing SAML2 assertions, via the Opensaml2 library. See
    http://coheigea.blogspot.com/2011/02/support-for-saml2-assertions-in-wss4j.html 
    for more information.
    * Performance work: A general code-rewrite has been done with a focus on improving 
    performance.
    * Support for Crypto trust-stores: WSS4J 1.6 separates the concept of keystore and 
    truststores. See http://coheigea.blogspot.com/2011/01/wss4j-16-crypto-property-change.html
    for more information.
 * WS-SecurityPolicy support for SAML tokens.
 * Initial OSGi Blueprint support for JAX-WS and JAX-RS
 * A simple framework for building an STS was added to CXF's WS-Security module.   See the
   sts_issue_operation sample to see this being used to generate SAML tokens based on X509 
   certs used for the authentication.


Users are encourage to review the migration guide at:
http://cxf.apache.org/docs/24-migration-guide.html
for further information and requirements for upgrading to 2.4.0.   In particular, the upgrades 
to WSS4J and Neethi will require some migration work if you use the WSS4J API's directly or
have created your own Policy objects or builders.   Additionally, XmlSchema was update to 2.0 
so any custom Aegis types may need to be updated.


2.4.3 fixes over 95 JIRA issues reported by users and the community.



2. Installation Prerequisites 

Before installing Apache CXF, make sure the following products,
with the specified versions, are installed on your system:

    * Java 5 Development Kit
    * Apache Maven 2.2.1 or 3.x
    * Some samples can be built with Apache Ant 1.6 or later


3.  Integrating CXF Into You Application

If you use Maven to build your application, you need merely add
appropriate dependencies. See the pom.xml files in the samples.

If you don't use Maven, you'll need to add one or more jars to your
classpath. The file lib/WHICH_JARS should help you decide which 
jars you need.

4. Building the Samples

Building the samples included in the binary distribution is easy. Change to
the samples directory and follow the build instructions in the README.txt file 
included with each sample.

5. Reporting Problems

If you have any problems or want to send feedback of any kind, please e-mail the
CXF dev list, dev@cxf.apache.org.  You can also file issues in JIRA at:

http://issues.apache.org/jira/browse/CXF


6. Migration notes:

See the migration guide at:
http://cxf.apache.org/docs/24-migration-guide.html
for caveats when upgrading from CXF 2.3.x to 2.4.x.

7. Specific issues, features, and improvements fixed in this version

Release Notes - CXF - Version 2.4.3

** Sub-task
    * [CXF-1519] - @XmlType in exception class is not respected
    * [CXF-2006] - RespectBinding feature and not understood required extensibility elements

** Bug
    * [CXF-2774] - urls in service list
    * [CXF-2924] - WS-SP support does not enforce signature algorithm or digest algorithm on server side
    * [CXF-2952] - Corba Use Case: CXF/JAX-WS Server and CXF/JAX-WS Client with corba:sequence produces Unmarshalling Error: null 
    * [CXF-3054] - wsdl12js.bat doesn't immediately exit after return result from version query
    * [CXF-3189] - Maven pom includes dependencies when build on IBM JDK
    * [CXF-3611] - JAXBEncoderDecoder.marshallException fails if exception object contains a map
    * [CXF-3691] - CXF and Tibco BW : JMS transport does not copy protocol headers in the destination message
    * [CXF-3715] - AbstractClient.java split Cookie "BC=0; expires=Fri,  05-Aug-2011 22:04:41 GMT; path=/; domain=.jolira.com" into two cookies "BC=0; expires=Fri," and "05-Aug-2011 22:04:41 GMT; path=/; domain=.jolira.com"
    * [CXF-3720] - SOAP over JMS miss SOAPJMS_soapAction property when use soap12
    * [CXF-3740] - CXF WSA handler have to throw WebServiceException on client side if addressing is required but not found in the message
    * [CXF-3742] - Too many startServer() and clientDestroyed() got invoked when spring created and java code created client/server mixed used.
    * [CXF-3744] - LoggingOutInterceptor shows wrong or no payload if StaxTransformFeature is active
    * [CXF-3747] - Dispatch client fails to set WS-Addressing Action header when WSDL's soap:operation does not have a style attribute
    * [CXF-3748] - Using Dispatch API with SOAPMessage type fails to set WS-Addressing action header properly if there's whitespace after the soap:body
    * [CXF-3749] - Using Dispatch API with Source type fails to set WS-Addressing action header properly in MESSAGE mode with SOAP 1.2
    * [CXF-3750] - Sometimes, CXF servlet will blocked until bussiness logical finished for one-way operation
    * [CXF-3754] - Dispatch API's ServiceImpl class fails to copy address/properties/bus/handlers from jaxws:client spring configuration
    * [CXF-3755] - setting wsa:addressing feature in cxf:bus causes wrong action header to be sent when using Dispatch API
    * [CXF-3756] - wadl2java ignores multiple inline XML schemas
    * [CXF-3758] - when web container be redeployed WebServiceContextImpl's static atrribute ThreadLocal<MessageContext> may not be release successfully.
    * [CXF-3759] - wadl2java fails with NullPointerException if status codes of multiple response elements are not in ascending numerical order
    * [CXF-3760] - Problematic inheritance of @Produces/@Consumes
    * [CXF-3761] - STSClient can't process EncryptedKey elements received from an STS
    * [CXF-3763] - CLONE - JaxWsDynamicClientFactory unable to handle custom exceptions
    * [CXF-3764] - JARS does not respect encoding when reading application/x-www-form-urlencoded;charset=Iso-8859-1 parameters
    * [CXF-3770] - WADL Generator does not handle Enums correctly
    * [CXF-3772] - Apache CXF 2.4.2 samples do not build on Windows 7 Ultimate 64 bit using Java SDK 1.7 and ant 1.8.2. following the README.txt directions.
    * [CXF-3773] - CXF unregisters MBeans for JAX-WS endpoints twice
    * [CXF-3775] - Cache-Control header provider won't emit the right values if multiple privateFields or noCacheFields are provided
    * [CXF-3776] - Duplicate policy getting added with java-first approach
    * [CXF-3777] - WS-RM provider may try to send a CreateSequence message to the anonymous endpoint in some cases
    * [CXF-3780] - DynamicClientFactory trying to resolve wsdl URL prior to calling into service factories
    * [CXF-3783] - Provide an option for the dispatch client to automatically set the correct SOAPAction based on the message payload
    * [CXF-3784] - incorrect OSGi metadata header for the jbi tansport and binding
    * [CXF-3785] - Calling start on a server that already is started resets things
    * [CXF-3786] - incorrect jaxp-ri bundle name in features.xml
    * [CXF-3787] - CXF does not set the correct host when viewing WSDLs that are published with JAXWS API
    * [CXF-3788] - Allow CXF HTTP Client to handle HTTP 202 for twoway calls when the real response is sent back to the decoupled endpoint.
    * [CXF-3789] - org.apache.cxf.endpoint.ClientImpl.invoke(BindingOperationInfo, Object[], Exchange) wastes cycles
    * [CXF-3790] - org.apache.cxf.jaxws.interceptors.WrapperClassInInterceptor.handleMessage(Message) contains cruft code
    * [CXF-3793] - Error in apache-cxf-2.4.2-features.xml
    * [CXF-3801] - EndpointReferenceUtils.convertToXML() causes ConcurrentModificationException under load
    * [CXF-3802] - jaxws Provider doesn't allow override of outbound ws addressing headers
    * [CXF-3803] - Non-spring based servlet not destroying Bus instances
    * [CXF-3805] - BeanInCreationException when CXF client factorybean used
    * [CXF-3808] - JAX-RS proxies don't work with the failover feature
    * [CXF-3821] - FormEncodingProvider does not check for null incoming object
    * [CXF-3822] - JAX-RS: A 406 status could should be returned for an improperly formatted Accept header
    * [CXF-3828] - german umlauts not supported in path names
    * [CXF-3834] - Array JAXRS parameters are not supported
    * [CXF-3842] - WS-Policy: Caused by: java.lang.IllegalArgumentException: local part cannot be "null" when creating a QName

** Improvement
    * [CXF-2053] - wsdl2java should log reason for switching from wrapped to bare in verbose mode
    * [CXF-3055] - Adding -version, -V and -Q switches to all command line tools
    * [CXF-3086] - "Warning building bundle" message in CXF 2.3 build
    * [CXF-3162] - Make it possible to set bus id through core:bus namespace handler
    * [CXF-3186] - Update to latest JAXB version 2.2.3 from 2.2.2
    * [CXF-3245] - Command line options are not uniform across CXF tools
    * [CXF-3276] - "Building Apache CXF HTTP Transport for OSGi 2.3.2" - build warnings
    * [CXF-3323] - Update "description" elements in all CXF POM files. 
    * [CXF-3593] - Provide a bus level option to ensure that WSDL locations are specified
    * [CXF-3686] - Adjust sample project method calls that should be accessed in a static manner.
    * [CXF-3690] - Refactor packaging for uniformity across examples.
    * [CXF-3705] - It's impossible to extend org.apache.cxf.ws.security.policy.model.AlgorithmSuite with a custom non-standad algorithms.
    * [CXF-3736] - Send the cause of exception stack trace
    * [CXF-3745] - Update OutTransformWriter to support default namespaces
    * [CXF-3752] - Allow ability to reset values in ResponseTimeCounter via JMX
    * [CXF-3765] - CXF features should use version range for features provided by Karaf
    * [CXF-3766] - Move the spring-jms feature into Karaf
    * [CXF-3767] - Support the ability to sign and encrypt message parts using a Kerberos Ticket
    * [CXF-3769] - Update WADL2Java generator to accept additional args 
    * [CXF-3794] - use geronimo-jaxws_2.2_spec 1.1 bundle
    * [CXF-3795] - Update JAXBElementProvider to optionally register a namespace to prefix mapper
    * [CXF-3796] - Introduce an header to disable the handling the PartialResponse when the response code is 202
    * [CXF-3806] - WebClient should be able to replace or remove already set headers only  
    * [CXF-3807] - jaasLoginModuleName methods in KerberosClient.java should be renamed to contextName
    * [CXF-3814] - update JDK download url in examples README.txt
    * [CXF-3815] - Add bin script for wsdl2idl in the CXF kit
    * [CXF-3817] - Add maven support on examples
    * [CXF-3820] - SecurityToken class should be serializable
    * [CXF-3823] - cxf-rt-transport-http-jetty should have the dependency of servlet API 2.5 instead of 3.0
    * [CXF-3824] - CLI tool -help should be able to list all switch in toolspec
    * [CXF-3825] - Add a README file in the CXF_HOME/etc
    * [CXF-3830] - Remove unmaintained integration/JCA examples from CXF build.
    * [CXF-3832] - Update JSONProvider to read from and write to Document
    * [CXF-3833] - Add maxIdleTime attribute support on the engine element
    * [CXF-3843] - Update InTransformReader to replace simple element content

** New Feature
    * [CXF-3125] - Add -validate option to the following utilities:  wsdl2xml, wsdl2soap, wsdl2service and wsdl2corba.
    * [CXF-3743] - register extensions with CXFNonSpringJaxrsServlet
    * [CXF-3762] - Add an -exceptionSuper flag, allowing wsdl2java to generate exceptions which extend from java.lang.RuntimeException

** Task
    * [CXF-3737] - Comments reference incorrect tool names in several files.
    * [CXF-3738] - Remove the Bouncy Castle license from the distribution.
    * [CXF-3810] - exclude ws_security/interopfest example from kit



